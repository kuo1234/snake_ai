# ä»å·²è®­ç»ƒæ¨¡å‹ç»§ç»­è®­ç»ƒæŒ‡å—

## ğŸ¯ åœºæ™¯ï¼šStage 1 å·²å®Œæˆï¼Œä» Stage 2 å¼€å§‹

å¦‚æœæ‚¨çš„ Stage 1 (6x6) å·²ç»è®­ç»ƒå®Œæˆå¹¶ä¸”è¡¨ç°è‰¯å¥½ï¼Œä¸éœ€è¦é‡æ–°è®­ç»ƒï¼Œå¯ä»¥ç›´æ¥ä» Stage 2 å¼€å§‹ã€‚

---

## ğŸš€ æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

### 1. è¿è¡Œå¿«é€Ÿè„šæœ¬
```bash
python train_from_stage2.py
```

### 2. è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ“ æ£€æŸ¥ Stage 1 æ¨¡å‹æ˜¯å¦å­˜åœ¨
- âœ“ éªŒè¯æ¨¡å‹è·¯å¾„
- âœ“ ä» Stage 2 å¼€å§‹è®­ç»ƒ
- âœ“ è‡ªåŠ¨åŠ è½½ Stage 1 æ¨¡å‹è¿›è¡Œè¿ç§»å­¦ä¹ 

---

## ğŸ”§ æ–¹æ³•äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°

### ä» Stage 2 å¼€å§‹
```bash
python snake_ai_ppo_v3.py --mode train --start-stage 1
```
**æ³¨æ„**: `--start-stage 1` è¡¨ç¤ºä»ç¬¬ 2 ä¸ªé˜¶æ®µå¼€å§‹ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰

### ä» Stage 3 å¼€å§‹
```bash
python snake_ai_ppo_v3.py --mode train --start-stage 2
```

### ä» Stage 4 å¼€å§‹
```bash
python snake_ai_ppo_v3.py --mode train --start-stage 3
```

---

## ğŸ“‹ é˜¶æ®µç´¢å¼•å¯¹ç…§è¡¨

| é˜¶æ®µåç§° | æ£‹ç›˜å¤§å° | --start-stage å‚æ•° |
|---------|----------|-------------------|
| Stage 1 (æ–°æ‰‹æ‘) | 6x6 | 0 |
| Stage 2 (è¿›é˜¶ç­) | 8x8 | 1 |
| Stage 3 (æŒ‘æˆ˜ç­) | 10x10 | 2 |
| Stage 4 (å¤§å¸ˆç­) | 12x12 | 3 |

---

## ğŸ” ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹

å½“æ‚¨ä½¿ç”¨ `--start-stage N` (N > 0) æ—¶ï¼Œç³»ç»Ÿä¼šï¼š

### 1. è‡ªåŠ¨æŸ¥æ‰¾å‰ä¸€é˜¶æ®µæ¨¡å‹
```
æŸ¥æ‰¾è·¯å¾„: models/ppo_snake_v3_curriculum/Stage{N}_*/best_model/best_model.zip
```

### 2. åŠ è½½æˆåŠŸ
```
ğŸ” ç™¼ç¾å·²è¨“ç·´çš„ Stage1_Novice æ¨¡å‹
   è·¯å¾‘: models/ppo_snake_v3_curriculum/Stage1_Novice/best_model/best_model.zip
   âœ“ æˆåŠŸè¼‰å…¥å‰ä¸€éšæ®µæ¨¡å‹ï¼Œå°‡ç”¨æ–¼é·ç§»å­¸ç¿’
```

### 3. åº”ç”¨å¢å¼ºå‚æ•°éœ‡è¡
```
âš¡ å¼·åŒ–åƒæ•¸éœ‡ç›ª: æé«˜å­¸ç¿’ç‡ + æ¢ç´¢ç‡ä»¥æ‰“ç ´èˆŠç­–ç•¥...
   - éœ‡ç›ªéšæ®µ: LR = 3e-4, Entropy = 0.02
   - è¨“ç·´ 150,000 æ­¥ï¼ˆå¼·åˆ¶é‡æ–°æ¢ç´¢ï¼‰
   
   - éæ¸¡éšæ®µ: LR = 1.5e-4, Entropy = 0.015  
   - è¨“ç·´ 100,000 æ­¥ï¼ˆç©©å®šç­–ç•¥ï¼‰
   
   - ç©©å®šéšæ®µ: LR = 3e-4, Entropy = 0.01
   - ç¹¼çºŒè¨“ç·´...
```

### 4. å¦‚æœæ‰¾ä¸åˆ°æ¨¡å‹
```
âš ï¸  è­¦å‘Š: æ‰¾ä¸åˆ° Stage1_Novice çš„æ¨¡å‹
   é æœŸè·¯å¾‘: models/ppo_snake_v3_curriculum/Stage1_Novice/best_model/best_model.zip
   å»ºè­°å…ˆè¨“ç·´ Stage 1
   æ˜¯å¦ç¹¼çºŒå¾é ­è¨“ç·´ Stage 2? (y/n):
```

---

## ğŸ’¡ å®ç”¨åœºæ™¯

### åœºæ™¯ 1: Stage 1 å·²å®Œç¾ï¼Œç›´æ¥è®­ç»ƒ Stage 2
```bash
# æ£€æŸ¥ Stage 1 æ¨¡å‹å­˜åœ¨
python demo_ui_v3.py  # é€‰æ‹© Stage 1 è§‚å¯Ÿæ•ˆæœ

# ç¡®è®¤åå¼€å§‹ Stage 2 è®­ç»ƒ
python train_from_stage2.py
```

### åœºæ™¯ 2: Stage 1-2 å·²å®Œæˆï¼Œè®­ç»ƒ Stage 3
```bash
python snake_ai_ppo_v3.py --mode train --start-stage 2
```

### åœºæ™¯ 3: é‡æ–°è®­ç»ƒæŸä¸ªé˜¶æ®µ
```bash
# å¦‚æœ Stage 2 æ•ˆæœä¸å¥½ï¼Œæƒ³é‡æ–°è®­ç»ƒ
# ä½†ä¿ç•™ Stage 1 çš„æ¨¡å‹

# åˆ é™¤ Stage 2 æ¨¡å‹
rm -r models/ppo_snake_v3_curriculum/Stage2_Intermediate

# é‡æ–°ä» Stage 2 å¼€å§‹
python train_from_stage2.py
```

---

## ğŸ“ è®­ç»ƒæµç¨‹å»ºè®®

### å®Œæ•´è®­ç»ƒæµç¨‹ï¼ˆä»é›¶å¼€å§‹ï¼‰
```bash
# Step 1: è®­ç»ƒ Stage 1
python snake_ai_ppo_v3.py --mode train --start-stage 0

# Step 2: è¯„ä¼° Stage 1
python snake_ai_ppo_v3.py --mode eval --stage 0

# Step 3: è§‚å¯Ÿ Stage 1
python demo_ui_v3.py  # é€‰æ‹© Stage 1

# Step 4: å¦‚æœ Stage 1 æ»¡æ„ï¼Œè®­ç»ƒ Stage 2
python train_from_stage2.py

# Step 5: è¯„ä¼° Stage 2
python snake_ai_ppo_v3.py --mode eval --stage 1

# ... é‡å¤ Stage 3, 4
```

### å¿«é€Ÿè¿­ä»£æµç¨‹ï¼ˆStage 1 å·²å®Œæˆï¼‰
```bash
# ç›´æ¥è®­ç»ƒ Stage 2-4
python train_from_stage2.py

# ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
# 1. åŠ è½½ Stage 1 â†’ è®­ç»ƒ Stage 2
# 2. åŠ è½½ Stage 2 â†’ è®­ç»ƒ Stage 3  
# 3. åŠ è½½ Stage 3 â†’ è®­ç»ƒ Stage 4
```

---

## âš™ï¸ æ–°å¢çš„å¢å¼ºåŠŸèƒ½

### 1. æ™ºèƒ½æ¨¡å‹æ£€æµ‹
- è‡ªåŠ¨æŸ¥æ‰¾å‰ä¸€é˜¶æ®µçš„æœ€ä½³æ¨¡å‹
- éªŒè¯æ¨¡å‹æ–‡ä»¶å®Œæ•´æ€§
- æä¾›å‹å¥½çš„é”™è¯¯æç¤º

### 2. å¢å¼ºå‚æ•°éœ‡è¡ï¼ˆå¯¹æŠ—å¡æ­»ï¼‰
å½“ä» Stage 1 è¿ç§»åˆ° Stage 2+ æ—¶ï¼š

**éœ‡è¡é˜¶æ®µ** (150k æ­¥):
- å­¦ä¹ ç‡: 3e-4 (é«˜)
- æ¢ç´¢ç‡: 0.02 (é«˜)
- ç›®çš„: æ‰“ç ´æ—§ç­–ç•¥ï¼Œå¼ºåˆ¶æ¢ç´¢

**è¿‡æ¸¡é˜¶æ®µ** (100k æ­¥):
- å­¦ä¹ ç‡: 1.5e-4 (ä¸­)
- æ¢ç´¢ç‡: 0.015 (ä¸­)  
- ç›®çš„: ç¨³å®šæ–°ç­–ç•¥

**ç¨³å®šé˜¶æ®µ** (250k æ­¥):
- å­¦ä¹ ç‡: 3e-4 (æ­£å¸¸)
- æ¢ç´¢ç‡: 0.01 (æ­£å¸¸)
- ç›®çš„: ç²¾ç»†ä¼˜åŒ–

### 3. å¤§å¹…æé«˜çš„é™·é˜±æƒ©ç½š
- Stage 2: -10.0 (åŸ -3.0)
- Stage 3: -15.0 (åŸ -5.0)
- Stage 4: -15.0 (åŸ -5.0)

ç›®çš„: è®© AI é‡æ–°å®³æ€•å¡æ­»

---

## ğŸ“ æ¨¡å‹æ–‡ä»¶ç»“æ„

```
models/ppo_snake_v3_curriculum/
â”œâ”€â”€ Stage1_Novice/              â† å·²å®Œæˆ
â”‚   â”œâ”€â”€ best_model/
â”‚   â”‚   â””â”€â”€ best_model.zip      â† ç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½è¿™ä¸ª
â”‚   â”œâ”€â”€ model.zip
â”‚   â””â”€â”€ logs/
â”œâ”€â”€ Stage2_Intermediate/         â† æ­£åœ¨è®­ç»ƒ
â”‚   â”œâ”€â”€ best_model/             â† è®­ç»ƒä¸­ä¼šä¿å­˜æœ€ä½³æ¨¡å‹
â”‚   â”œâ”€â”€ checkpoints/            â† æ¯ 50k æ­¥ä¿å­˜
â”‚   â””â”€â”€ logs/
â”œâ”€â”€ Stage3_Advanced/            â† ç­‰å¾…è®­ç»ƒ
â””â”€â”€ Stage4_Master/              â† ç­‰å¾…è®­ç»ƒ
```

---

## âœ… æ£€æŸ¥æ¸…å•

å¼€å§‹ä» Stage 2 è®­ç»ƒå‰ï¼Œç¡®è®¤ï¼š

- [ ] Stage 1 æ¨¡å‹å­˜åœ¨
  ```bash
  ls models/ppo_snake_v3_curriculum/Stage1_Novice/best_model/best_model.zip
  ```

- [ ] Stage 1 è¯„ä¼°åˆ†æ•° â‰¥ 25
  ```bash
  python snake_ai_ppo_v3.py --mode eval --stage 0
  ```

- [ ] Stage 1 è¡¨ç°æ»¡æ„ï¼ˆè§‚å¯Ÿæ¼”ç¤ºï¼‰
  ```bash
  python demo_ui_v3.py  # é€‰æ‹© Stage 1
  ```

- [ ] ç£ç›˜ç©ºé—´å……è¶³ï¼ˆçº¦ 500MBï¼‰

- [ ] GPU å¯ç”¨ï¼ˆå¯é€‰ä½†æ¨èï¼‰
  ```bash
  python -c "import torch; print(torch.cuda.is_available())"
  ```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ‰¾ä¸åˆ° Stage 1 æ¨¡å‹
**A**: æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š
```bash
# åº”è¯¥å­˜åœ¨ä»¥ä¸‹ä»»ä¸€æ–‡ä»¶
ls models/ppo_snake_v3_curriculum/Stage1_Novice/best_model/best_model.zip
ls models/ppo_snake_v3_curriculum/Stage1_Novice/model.zip
```

### Q2: Stage 2 è¿˜æ˜¯ä¼šå¡æ­»
**A**: 
1. ç¡®è®¤é™·é˜±æƒ©ç½šå·²æ›´æ–°ä¸º -10.0
2. æ£€æŸ¥å‚æ•°éœ‡è¡æ˜¯å¦æ‰§è¡Œï¼ˆè®­ç»ƒå¼€å§‹æ—¶ä¼šæ˜¾ç¤ºï¼‰
3. å¢åŠ éœ‡è¡æ­¥æ•°æˆ–æé«˜æ¢ç´¢ç‡

### Q3: è®­ç»ƒé€Ÿåº¦å¤ªæ…¢
**A**: 
1. ä½¿ç”¨ GPU: `--device cuda`
2. å‡å°‘å¹¶è¡Œç¯å¢ƒ: `--n-envs 4`
3. ä½¿ç”¨æ›´å¿«çš„ CPU

---

## ğŸ¯ æ€»ç»“

ç°åœ¨æ‚¨å¯ä»¥ï¼š

âœ… **è·³è¿‡å·²å®Œæˆçš„é˜¶æ®µ**
```bash
python train_from_stage2.py
```

âœ… **è‡ªåŠ¨åŠ è½½å‰ä¸€é˜¶æ®µæ¨¡å‹**
- ç³»ç»Ÿä¼šæŸ¥æ‰¾å¹¶åŠ è½½ Stage 1 æ¨¡å‹
- åº”ç”¨å¢å¼ºå‚æ•°éœ‡è¡
- å¤§å¹…æé«˜é™·é˜±æƒ©ç½š

âœ… **çµæ´»çš„è®­ç»ƒæ§åˆ¶**
- ä»ä»»ä½•é˜¶æ®µå¼€å§‹
- é‡æ–°è®­ç»ƒç‰¹å®šé˜¶æ®µ
- ä¿ç•™å·²å®Œæˆçš„è®­ç»ƒæˆæœ

å¼€å§‹è®­ç»ƒ Stage 2ï¼Œè§£å†³å¡æ­»é—®é¢˜ï¼ğŸš€

---

æ›´æ–°æ—¶é—´: 2025-10-26
ç‰ˆæœ¬: V3 with Skip Completed Stages
