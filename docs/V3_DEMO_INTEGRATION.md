# âœ… PPO V3 å·²æˆåŠŸé›†æˆåˆ° demo_ai.py

## ğŸ‰ å®Œæˆçš„ä¿®æ”¹

### 1. æ›´æ–°æ–‡æ¡£è¯´æ˜
```python
# ä»:
"""æ”¯æ´ Q-learningã€PPO V1 å’Œ PPO V2 ä¸‰ç¨®æ¨¡å‹"""

# æ”¹ä¸º:
"""æ”¯æ´ Q-learningã€PPO V1ã€PPO V2 å’Œ PPO V3 (Curriculum Learning) å››ç¨®æ¨¡å‹"""
```

### 2. æ‰©å±•æ¨¡å‹æ‰«æåŠŸèƒ½
```python
def list_available_models():
    models = {
        'qlearning': [],
        'ppo_v1': [],
        'ppo_v2': [],
        'ppo_v3': []  # âœ“ æ–°å¢
    }
    
    # âœ“ æ–°å¢ V3 æ¨¡å‹æ‰«æ
    # æ‰«æ 4 ä¸ªè¯¾ç¨‹é˜¶æ®µ:
    # - Stage1_Novice (6x6)
    # - Stage2_Intermediate (8x8)
    # - Stage3_Advanced (10x10)
    # - Stage4_Master (12x12)
```

### 3. UI é€‰æ‹©å™¨æ”¯æŒ
```python
# ModelSelector.setup_ui() ä¸­æ·»åŠ :
if HAS_PPO and self.models['ppo_v3']:
    btn = UIButton(center_x, start_y + spacing * 3, button_width, button_height, 
                  f"PPO V3 ğŸ“ ({len(self.models['ppo_v3'])}å€‹)", "ppo_v3")
    self.type_buttons.append(btn)
```

### 4. æ¨¡å‹æ–‡ä»¶æ˜¾ç¤ºå¢å¼º
```python
# draw_model_file_selection() ä¸­æ·»åŠ é˜¶æ®µæ ‡è®°:
if self.selected_model_type == 'ppo_v3':
    if 'Stage1_Novice' in model_path:
        display_name = "ğŸ“ éšæ®µ1: " + display_name + " (6x6)"
    elif 'Stage2_Intermediate' in model_path:
        display_name = "ğŸ“ éšæ®µ2: " + display_name + " (8x8)"
    # ... ç­‰ç­‰
```

### 5. æ¼”ç¤ºåŠŸèƒ½æ”¯æŒ
```python
# watch_ppo_play() æ›´æ–°:
# - æ”¯æŒ version='v3'
# - æ ¹æ®æ£‹ç›˜å¤§å°è‡ªåŠ¨é€‰æ‹©å¯¹åº”é˜¶æ®µæ¨¡å‹
# - æ˜¾ç¤º V3 ç‰¹æ€§ä¿¡æ¯
```

### 6. ä¸»é€‰å•æ˜¾ç¤º
```python
# main() å‡½æ•°ä¸­:
if has_ppo_v3:
    print(f"  âœ“ PPO V3 (èª²ç¨‹å­¸ç¿’): {len(available_models['ppo_v3'])} å€‹æ¨¡å‹")
else:
    print(f"  âœ— PPO V3: ç„¡å¯ç”¨æ¨¡å‹")
```

---

## ğŸ® ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1: å›¾å½¢åŒ– UIï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨ UI é€‰æ‹©å™¨
python demo_ui.py
```

**æ“ä½œæ­¥éª¤ï¼š**
1. ç¬¬ä¸€é¡µï¼šé€‰æ‹© "PPO V3 ğŸ“ (Xå€‹)" 
2. ç¬¬äºŒé¡µï¼šé€‰æ‹©å…·ä½“é˜¶æ®µå’Œæ¨¡å‹
   - ğŸ“ éšæ®µ1: 6x6 æ¨¡å‹
   - ğŸ“ éšæ®µ2: 8x8 æ¨¡å‹
   - ğŸ“ éšæ®µ3: 10x10 æ¨¡å‹
   - ğŸ“ éšæ®µ4: 12x12 æ¨¡å‹
3. ç¬¬ä¸‰é¡µï¼šè¾“å…¥æ£‹ç›˜å¤§å°
4. è‡ªåŠ¨å¯åŠ¨æ¼”ç¤º

### æ–¹æ³• 2: å‘½ä»¤è¡Œ

```bash
# å¯åŠ¨ä¸»é€‰å•
python demo_ai.py

# é€‰æ‹©é€‰é¡¹ 0ï¼Œç„¶ååœ¨ UI ä¸­é€‰æ‹© V3
```

### æ–¹æ³• 3: ç›´æ¥è°ƒç”¨ï¼ˆç¼–ç¨‹æ–¹å¼ï¼‰

```python
from demo_ai import watch_ppo_play

# è§‚çœ‹ V3 AI ç© 10x10 æ£‹ç›˜
watch_ppo_play(version='v3', board_size=10)

# è§‚çœ‹ç‰¹å®šæ¨¡å‹
watch_ppo_play(
    version='v3', 
    board_size=8,
    model_path='models/ppo_snake_v3_curriculum/Stage2_Intermediate/best_model/best_model.zip'
)
```

---

## ğŸ“Š V3 æ¨¡å‹ç»“æ„

```
models/ppo_snake_v3_curriculum/
â”œâ”€â”€ Stage1_Novice/              # é˜¶æ®µ1: 6x6
â”‚   â”œâ”€â”€ best_model/
â”‚   â”‚   â””â”€â”€ best_model.zip      # â­ æœ€ä½³æ¨¡å‹
â”‚   â”œâ”€â”€ model.zip               # æœ€ç»ˆæ¨¡å‹
â”‚   â””â”€â”€ checkpoints/
â”‚       â”œâ”€â”€ Stage1_*_50000_steps.zip
â”‚       â”œâ”€â”€ Stage1_*_100000_steps.zip
â”‚       â””â”€â”€ ...
â”œâ”€â”€ Stage2_Intermediate/        # é˜¶æ®µ2: 8x8
â”‚   â”œâ”€â”€ best_model/
â”‚   â”œâ”€â”€ model.zip
â”‚   â””â”€â”€ checkpoints/
â”œâ”€â”€ Stage3_Advanced/            # é˜¶æ®µ3: 10x10
â”‚   â”œâ”€â”€ best_model/
â”‚   â”œâ”€â”€ model.zip
â”‚   â””â”€â”€ checkpoints/
â””â”€â”€ Stage4_Master/              # é˜¶æ®µ4: 12x12
    â”œâ”€â”€ best_model/
    â”œâ”€â”€ model.zip
    â””â”€â”€ checkpoints/
```

---

## ğŸ¯ æ™ºèƒ½æ¨¡å‹é€‰æ‹©

V3 ä¼šæ ¹æ®æ£‹ç›˜å¤§å°è‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„é˜¶æ®µï¼š

| æ£‹ç›˜å¤§å° | è‡ªåŠ¨é€‰æ‹©é˜¶æ®µ | è¯´æ˜ |
|---------|------------|------|
| 6x6 | Stage1_Novice | æ–°æ‰‹æ‘è®­ç»ƒ |
| 8x8 | Stage2_Intermediate | æ ‡å‡†æ£‹ç›˜ |
| 10x10 | Stage3_Advanced | æŒ‘æˆ˜éš¾åº¦ |
| 12x12 | Stage4_Master | å¤§å¸ˆçº§åˆ« |
| å…¶ä»– | Stage2_Intermediate | é»˜è®¤ 8x8 æ¨¡å‹ |

---

## ğŸ†š UI ä¸­çš„ç‰ˆæœ¬å¯¹æ¯”

åœ¨å›¾å½¢åŒ–é€‰æ‹©å™¨ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é¸æ“‡ AI æ¨¡å‹é¡å‹            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Q-Learning (0å€‹)   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ PPO V1 (4å€‹)       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ PPO V2 (6å€‹)       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ PPO V3 ğŸ“ (18å€‹)   â”‚ â­   â”‚  â† æ–°å¢ï¼
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æµ‹è¯•çŠ¶æ€

```bash
# è¿è¡Œæµ‹è¯•
python test_v3_demo.py

# è¾“å‡º:
âœ“ demo_ai.py è½½å…¥æˆåŠŸ
æ”¯æŒçš„æ¨¡å‹ç±»å‹: ['qlearning', 'ppo_v1', 'ppo_v2', 'ppo_v3']
  ppo_v3: 18 ä¸ªæ¨¡å‹  âœ“
```

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### V3 æ¨¡å‹åŠ è½½é€»è¾‘

```python
# åœ¨ watch_ppo_play() ä¸­:
if version == 'v3':
    # æ ¹æ®æ£‹ç›˜å¤§å°æ˜ å°„åˆ°å¯¹åº”é˜¶æ®µ
    stage_map = {
        6: "Stage1_Novice",
        8: "Stage2_Intermediate",
        10: "Stage3_Advanced",
        12: "Stage4_Master"
    }
    stage = stage_map.get(board_size, "Stage2_Intermediate")
    
    # ä¼˜å…ˆåŠ è½½æœ€ä½³æ¨¡å‹
    models_to_try = [
        f"models/ppo_snake_v3_curriculum/{stage}/best_model/best_model.zip",
        f"models/ppo_snake_v3_curriculum/{stage}/model.zip",
    ]
```

### V3 ä½¿ç”¨ V2 ç¯å¢ƒ

```python
# V3 ä½¿ç”¨ä¸ V2 ç›¸åŒçš„ç¯å¢ƒï¼ˆ16-d è§‚å¯Ÿç©ºé—´ï¼‰
if version == 'v3':
    env = GymSnakeEnvV2(board_size=board_size, render_mode="human")
    version_name = "PPO V3 (Curriculum Learning)"
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. æŸ¥çœ‹ä¸åŒé˜¶æ®µçš„è¡¨ç°

```bash
# å¯åŠ¨ UI
python demo_ui.py

# ä¾æ¬¡é€‰æ‹©:
# - PPO V3 â†’ Stage1 (6x6) â†’ è¾“å…¥ 6
# - PPO V3 â†’ Stage2 (8x8) â†’ è¾“å…¥ 8
# - PPO V3 â†’ Stage3 (10x10) â†’ è¾“å…¥ 10
# - PPO V3 â†’ Stage4 (12x12) â†’ è¾“å…¥ 12
```

### 2. å¯¹æ¯” V1/V2/V3

```bash
# ç›¸åŒæ£‹ç›˜å¤§å°ï¼Œä¸åŒç‰ˆæœ¬
# 8x8 æ£‹ç›˜:
# - PPO V1 â†’ best_model â†’ 8
# - PPO V2 â†’ best_model â†’ 8
# - PPO V3 â†’ Stage2 best_model â†’ 8
```

### 3. æŒ‘æˆ˜å¤§æ£‹ç›˜

```bash
# V3 æ˜¯å”¯ä¸€èƒ½åœ¨å¤§æ£‹ç›˜è¡¨ç°ä¼˜å¼‚çš„ç‰ˆæœ¬
# é€‰æ‹© PPO V3 â†’ Stage4 â†’ 12
```

---

## ğŸ“ è¯¾ç¨‹å­¦ä¹ çš„ä¼˜åŠ¿

åœ¨ demo ä¸­è§‚å¯Ÿ V3 æ—¶ï¼Œä½ ä¼šå‘ç°ï¼š

**é˜¶æ®µ1 (6x6):**
- âœ“ åŸºç¡€æ‰å®
- âœ“ å¾ˆå°‘æ’å¢™
- âœ“ èƒ½æ‰¾åˆ°é£Ÿç‰©

**é˜¶æ®µ2 (8x8):**
- âœ“ ç»§æ‰¿é˜¶æ®µ1çš„æŠ€èƒ½
- âœ“ ç©ºé—´è§„åˆ’æ›´å¥½
- âœ“ é¿æ’æ›´å¨´ç†Ÿ

**é˜¶æ®µ3 (10x10):**
- âœ“ å¤æ‚è·¯å¾„è§„åˆ’
- âœ“ é•¿æœŸç­–ç•¥
- âœ“ å¾ˆå°‘é™·å…¥å›°å¢ƒ

**é˜¶æ®µ4 (12x12):**
- âœ“ å¤§ç©ºé—´å®Œç¾æ§åˆ¶
- âœ“ é«˜åˆ†æ•°
- âœ“ æ¥è¿‘ä¸“å®¶çº§è¡¨ç°

---

## ğŸš€ ä¸‹ä¸€æ­¥

1. **è®­ç»ƒ V3 æ¨¡å‹**
   ```bash
   python snake_ai_ppo_v3.py --mode train --device auto --n-envs 8
   ```

2. **ä½¿ç”¨ UI è§‚çœ‹æ¼”ç¤º**
   ```bash
   python demo_ui.py
   ```

3. **å¯¹æ¯”ä¸åŒç‰ˆæœ¬**
   - åœ¨ç›¸åŒæ£‹ç›˜ä¸Šæµ‹è¯• V1, V2, V3
   - è§‚å¯Ÿæ€§èƒ½å·®å¼‚

4. **åˆ†äº«ç»“æœ**
   - æˆªå›¾æˆ–å½•åˆ¶è§†é¢‘
   - åˆ†äº«è®­ç»ƒæ—¥å¿—

---

## âœ… æ€»ç»“

**demo_ai.py ç°åœ¨å®Œæ•´æ”¯æŒ PPO V3ï¼**

- âœ“ è‡ªåŠ¨æ‰«ææ‰€æœ‰ V3 æ¨¡å‹ï¼ˆ4ä¸ªé˜¶æ®µï¼‰
- âœ“ UI ä¸­æ˜¾ç¤º "PPO V3 ğŸ“"
- âœ“ é˜¶æ®µæ ‡è®°æ¸…æ™°ï¼ˆğŸ“ éšæ®µ1-4ï¼‰
- âœ“ æ™ºèƒ½æ¨¡å‹é€‰æ‹©ï¼ˆæ ¹æ®æ£‹ç›˜å¤§å°ï¼‰
- âœ“ å®Œæ•´æ¼”ç¤ºåŠŸèƒ½
- âœ“ ä¸ V1/V2 æ— ç¼é›†æˆ

**äº«å—è¯¾ç¨‹å­¦ä¹ çš„å¼ºå¤§æ•ˆæœå§ï¼** ğŸ®âœ¨
